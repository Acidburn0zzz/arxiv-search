
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Architectural overview &#8212; arXiv search 0.2 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Search Interface" href="search_ui.html" />
    <link rel="prev" title="arXiv Search System Documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="architectural-overview">
<h1>Architectural overview<a class="headerlink" href="#architectural-overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="context">
<h2>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h2>
<p>The arXiv search system supports queries about arXiv papers both from human
users and from API clients (via the arXiv API gateway). Most readers arrive
at the search interface via a small search bar in the running header of
arxiv.org pages, or by clicking on the name of an author on the abstract page
or other listings.</p>
<div class="figure" id="id1">
<span id="figure-ng-search-context"></span><a class="reference external image-reference" href="_static/diagrams/ng-search-context.png"><img alt="_images/ng-search-context.png" src="_images/ng-search-context.png" /></a>
<p class="caption"><span class="caption-text">System context for arXiv search.</span></p>
</div>
<p>The search system draws content from the core metadata repository (currently
the classic arXiv application, via the <code class="docutils literal notranslate"><span class="pre">docmeta</span></code> endpoint), and (future)
from the fulltext extraction service.</p>
<p>Notifications about new content are disseminated by the publication system via
a Kinesis stream. When metadata and/or the full text content (future) is
available, the search system retrieves the relevant metadata and content from
the metadata store and plain text store (future), respectively, and updates the
search index.</p>
<p>In the future, the search system may be used to support other discovery tools
and APIs, including the RSS feeds.</p>
</div>
<div class="section" id="containers">
<h2>Containers<a class="headerlink" href="#containers" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id2">
<span id="figure-ng-search-subsystems"></span><a class="reference external image-reference" href="_static/diagrams/ng-search-subsystems.png"><img alt="_images/ng-search-subsystems.png" src="_images/ng-search-subsystems.png" /></a>
<p class="caption"><span class="caption-text">Container view of arXiv search.</span></p>
</div>
<p>The core of the search system is an ElasticSearch cluster, provided by the <a class="reference external" href="https://aws.amazon.com/elasticsearch-service/">AWS
Elasticsearch Service</a>.</p>
<p>The search application, implemented in Python/Flask, provides both the
user-facing interfaces as well as a REST API. These two sets of endpoints
(<a class="reference internal" href="api/search.routes.ui.html#module-search.routes.ui" title="search.routes.ui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.routes.ui</span></code></a> and <a class="reference internal" href="api/search.routes.api.html#module-search.routes.api" title="search.routes.api"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.routes.api</span></code></a>) are deployed as two
separate services.</p>
<p>The indexing agent application is responsible for coordinating updates to the
ElasticSearch cluster. The agent subscribes to notifications about the
availability of metadata and/or plain text (future) for new publications
delivered by the Kinesis broker. The agent makes requests to the metadata
repository and the plain text store (future), transforms those data into a
search document, and sends that document to ES.</p>
</div>
<div class="section" id="components-search-ui-service">
<h2>Components: Search UI service<a class="headerlink" href="#components-search-ui-service" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id3">
<span id="figure-ng-search-application-components"></span><a class="reference external image-reference" href="_static/diagrams/ng-search-service-components.png"><img alt="_images/ng-search-service-components.png" src="_images/ng-search-service-components.png" /></a>
<p class="caption"><span class="caption-text">Components of the search service.</span></p>
</div>
<p>The search ui service is a Flask application that handles user/client requests
to search arXiv papers.</p>
<p>The entry-point to the application is <a class="reference internal" href="api/search.factory.html#search.factory.create_ui_web_app" title="search.factory.create_ui_web_app"><code class="xref py py-func docutils literal notranslate"><span class="pre">search.factory.create_ui_web_app()</span></code></a>.
That application factory function attaches templates and static files from
<code class="xref py py-mod docutils literal notranslate"><span class="pre">arxiv.base</span></code> for use in search-specific templates,
and attaches the routing blueprint provided by <a class="reference internal" href="api/search.routes.ui.html#module-search.routes.ui" title="search.routes.ui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.routes.ui</span></code></a>.</p>
<p><a class="reference internal" href="api/search.routes.ui.html#module-search.routes.ui" title="search.routes.ui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.routes.ui</span></code></a> routes parameters from incoming requests to the two
main search controllers:</p>
<ul class="simple">
<li><a class="reference internal" href="api/search.controllers.simple.html#module-search.controllers.simple" title="search.controllers.simple"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.controllers.simple</span></code></a></li>
<li><a class="reference internal" href="api/search.controllers.advanced.html#module-search.controllers.advanced" title="search.controllers.advanced"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.controllers.advanced</span></code></a></li>
</ul>
<p>These are implemented separately, rather than trying to accommodate all
use-cases in one controller, because we expect user interface methods to change
significantly as enhanced features are introduced. Each controller module
implements its own classes for form handling and validation.</p>
</div>
<div class="section" id="components-indexing-agent">
<h2>Components: Indexing agent<a class="headerlink" href="#components-indexing-agent" title="Permalink to this headline">¶</a></h2>
<p>Notifications about new document metadata are handled by <a class="reference internal" href="api/search.agent.html#module-search.agent" title="search.agent"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.agent</span></code></a>,
implemented using <code class="xref py py-mod docutils literal notranslate"><span class="pre">arxiv.base.agent</span></code>. This class coordinates retrieval of
metadata from the docmeta endpoint (classic), transforms those content
into a search document using <a class="reference internal" href="api/search.process.transform.html#module-search.process.transform" title="search.process.transform"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.process.transform</span></code></a>, and updates
ElasticSearch using <a class="reference internal" href="api/search.services.index.html#module-search.services.index" title="search.services.index"><code class="xref py py-mod docutils literal notranslate"><span class="pre">search.services.index</span></code></a>.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">arXiv search</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Architectural overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#context">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="#containers">Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#components-search-ui-service">Components: Search UI service</a></li>
<li class="toctree-l2"><a class="reference internal" href="#components-indexing-agent">Components: Indexing agent</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="search_ui.html">Search Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="search_api.html">Search API (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">search</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">arXiv Search System Documentation</a></li>
      <li>Next: <a href="search_ui.html" title="next chapter">Search Interface</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, arXiv Team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/architecture.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>